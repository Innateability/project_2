{% extends "base.html" %}
{% set page_title = "OBJECTIVES" %}

{% block content %}


<h2>Objectives</h2>

{% if grouped_objectives %}

<div id="assigned_obj" class="content active">
    {% for (title, employee_id), objs in grouped_objectives.items() %}
    {% set ns = namespace(reviewed=false) %}
    {% for obj in objs %}
    {% if obj.reviews %}
    {% set ns.reviewed = true %}
    {% endif %}
    {% endfor %}

    <a href="{{ url_for('employee.objectives_overview', objective_id=objs[0].id) }}" style="text-decoration:none;">
        <div class="obj-card"
         style="
            background-color:white;
            width:100%;
            max-width:700px;
            border:2px solid black;
            border-radius:10px;
            padding:20px;
            margin:20px;
            box-shadow:0 8px 20px rgba(0,0,0,0.3);
            display:grid;
            grid-template-columns:80% 20%;
            overflow:hidden;
            border-right: 10px solid {{ 'green' if ns.reviewed else 'none' }};">
            <div style="overflow:hidden; text-overflow:ellipsis;">
                {{ title }}
            </div>
            <div style="color:green; padding-left:20px;">
                Assigned by: {{ objs[0].assigned_by.name }}
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}

{% if admin_grouped_objectives %}

<div id="assigned_obj" class="content active">
    {% for (title, employee_id), objs in admin_grouped_objectives.items() %}
    {% set ns = namespace(reviewed=false) %}
    {% for obj in objs %}
    {% if obj.reviews %}
    {% set ns.reviewed = true %}
    {% endif %}
    {% endfor %}

    <a href="{{ url_for('employee.objectives_overview', objective_id=objs[0].id) }}" style="text-decoration:none;">
        <div class="obj-card"
         style="
            background-color:white;
            width:100%;
            max-width:700px;
            border:2px solid black;
            border-radius:10px;
            padding:20px;
            margin:20px;
            box-shadow:0 8px 20px rgba(0,0,0,0.3);
            display:grid;
            grid-template-columns:80% 20%;
            overflow:hidden;
            border-right: 10px solid {{ 'green' if ns.reviewed else 'none' }};">
            <div style="overflow:hidden; text-overflow:ellipsis;">
                {{ title }}
            </div>
            <div style="color:green; padding-left:20px;">
                Assigned by: {{ objs[0].assigned_by.name }}
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}


{% endblock %}
